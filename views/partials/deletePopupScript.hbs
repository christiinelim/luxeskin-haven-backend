<script>
    document.addEventListener('DOMContentLoaded', () => {
        const deleteButtons = document.querySelectorAll('.button-danger');
        const deleteConfirmation = document.querySelector('.delete-popup');
        let idToDelete = null;
        
        deleteButtons.forEach(button => {
            const id = button.dataset.id;
            const name = button.dataset.name;

            button.addEventListener('click', () => {
                idToDelete = id;
                deleteConfirmation.style.display = 'block';
                document.querySelector('.delete-item').innerHTML = name
            });
        });

        const cancelDeleteButton = document.querySelector('#warning-action-cancel');
        cancelDeleteButton.addEventListener('click', () => {
            deleteConfirmation.style.display = 'none';
        });

        const confirmDeleteButton = document.querySelector('#warning-action-confirm');
        confirmDeleteButton.addEventListener('click', () => {
            try {
                deleteConfirmation.style.display = 'none';
                const csrfToken = document.getElementById('csrf-token').value;
                axios.defaults.headers.common['X-CSRF-Token'] = csrfToken;
                axios.delete('/products/delete/' + idToDelete);

                const deletedRow = document.querySelector(`[data-product-id="${idToDelete}"]`).closest('tr');
                deletedRow.remove();
            } catch (error) {
                console.log(error)
            }
        });
    });
</script>